<p>queue-management works!</p>
<div class="queue-container">
	<h2>Queue</h2>

	<div *ngIf="user">
		<form [formGroup]="form" (ngSubmit)="join()">
			<label>Party size</label>
			<input type="number" formControlName="party_size" />
			<button type="button" (click)="join()">Join Queue</button>
		</form>

		<div *ngIf="myPosition">
			<p>Your position: {{ myPosition.position }}</p>
			<p>Estimated wait: {{ myPosition.estimatedWaitTime }} minutes</p>
		</div>
	</div>

	<div class="error" *ngIf="error">{{ error }}</div>

	<h3>Current Queue</h3>
	<ul>
		<li *ngFor="let q of queue">
			#{{ q.queue_position }} - {{ q.user_id }} (party {{ q.party_size }}) - {{ q.status }}
			<button *ngIf="user?.role === 'manager' && q.status === 'waiting'" (click)="seat(q, 1)">Seat on Table 1</button>
			<button *ngIf="user && user.id === q.user_id && q.status === 'waiting'" (click)="leave(q.id)">Leave</button>
		</li>
	</ul>
</div>
